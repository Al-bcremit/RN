{"version":3,"names":["NativeReanimated","constructor","native","global","__reanimatedModuleProxy","undefined","ReanimatedModule","NativeModules","installTurboModule","InnerNativeModule","checkVersion","cppVersion","_REANIMATED_VERSION_CPP","ok","jsVersion","match","jsMajor","jsMinor","split","cppMajor","cppMinor","console","error","getTimestamp","Error","installCoreFunctions","valueUnpacker","makeShareableClone","value","makeSynchronizedDataHolder","valueRef","getDataSynchronously","ref","updateDataSynchronously","scheduleOnUI","shareable","registerSensor","sensorType","interval","handler","unregisterSensor","sensorId","registerEventHandler","eventHash","eventHandler","unregisterEventHandler","id","getViewProp","viewTag","propName","callback","configureLayoutAnimation","type","config","enableLayoutAnimations","flag","configureProps","uiProps","nativeProps","subscribeForKeyboardEvents","unsubscribeFromKeyboardEvents","listenerId"],"sources":["NativeReanimated.ts"],"sourcesContent":["import { NativeModules } from 'react-native';\nimport { ShareableRef, ShareableSyncDataHolderRef } from '../commonTypes';\nimport { LayoutAnimationFunction } from '../layoutReanimation';\nimport { version as jsVersion } from '../../../package.json';\n\nexport class NativeReanimated {\n  native: boolean;\n  private InnerNativeModule: any;\n\n  constructor(native = true) {\n    if (global.__reanimatedModuleProxy === undefined && native) {\n      const { ReanimatedModule } = NativeModules;\n      ReanimatedModule?.installTurboModule();\n    }\n    this.InnerNativeModule = global.__reanimatedModuleProxy;\n    this.native = native;\n    if (native) {\n      this.checkVersion();\n    }\n  }\n\n  checkVersion(): void {\n    const cppVersion = global._REANIMATED_VERSION_CPP;\n    const ok = (() => {\n      if (\n        jsVersion.match(/^\\d+\\.\\d+\\.\\d+$/) &&\n        cppVersion.match(/^\\d+\\.\\d+\\.\\d+$/)\n      ) {\n        // x.y.z, compare only major and minor, skip patch\n        const [jsMajor, jsMinor] = jsVersion.split('.');\n        const [cppMajor, cppMinor] = cppVersion.split('.');\n        return jsMajor === cppMajor && jsMinor === cppMinor;\n      } else {\n        // alpha, beta or rc, compare everything\n        return jsVersion === cppVersion;\n      }\n    })();\n    if (!ok) {\n      console.error(\n        `[Reanimated] Mismatch between JavaScript part and native part of Reanimated (${jsVersion} vs. ${cppVersion}). Did you forget to re-build the app after upgrading react-native-reanimated? If you use Expo Go, you must downgrade to ${cppVersion} which is bundled into Expo SDK.`\n      );\n      // TODO: detect Expo managed workflow\n    }\n  }\n\n  getTimestamp(): number {\n    throw new Error('stub implementation, used on the web only');\n  }\n\n  installCoreFunctions(valueUnpacker: <T>(value: T) => T): void {\n    return this.InnerNativeModule.installCoreFunctions(valueUnpacker);\n  }\n\n  makeShareableClone<T>(value: T): ShareableRef<T> {\n    return this.InnerNativeModule.makeShareableClone(value);\n  }\n\n  makeSynchronizedDataHolder<T>(\n    valueRef: ShareableRef<T>\n  ): ShareableSyncDataHolderRef<T> {\n    return this.InnerNativeModule.makeSynchronizedDataHolder(valueRef);\n  }\n\n  getDataSynchronously<T>(ref: ShareableSyncDataHolderRef<T>): T {\n    return this.InnerNativeModule.getDataSynchronously(ref);\n  }\n\n  updateDataSynchronously<T>(\n    ref: ShareableSyncDataHolderRef<T>,\n    value: T\n  ): void {\n    this.InnerNativeModule.updateDataSynchronously(ref, value);\n  }\n\n  scheduleOnUI<T>(shareable: ShareableRef<T>) {\n    return this.InnerNativeModule.scheduleOnUI(shareable);\n  }\n\n  registerSensor<T>(\n    sensorType: number,\n    interval: number,\n    handler: ShareableRef<T>\n  ) {\n    return this.InnerNativeModule.registerSensor(sensorType, interval, handler);\n  }\n\n  unregisterSensor(sensorId: number) {\n    return this.InnerNativeModule.unregisterSensor(sensorId);\n  }\n\n  registerEventHandler<T>(\n    eventHash: string,\n    eventHandler: ShareableRef<T>\n  ): string {\n    return this.InnerNativeModule.registerEventHandler(eventHash, eventHandler);\n  }\n\n  unregisterEventHandler(id: string): void {\n    return this.InnerNativeModule.unregisterEventHandler(id);\n  }\n\n  getViewProp<T>(\n    viewTag: string,\n    propName: string,\n    callback?: (result: T) => void\n  ): Promise<T> {\n    return this.InnerNativeModule.getViewProp(viewTag, propName, callback);\n  }\n\n  configureLayoutAnimation(\n    viewTag: number,\n    type: string,\n    config: ShareableRef<Keyframe | LayoutAnimationFunction>\n  ) {\n    this.InnerNativeModule.configureLayoutAnimation(viewTag, type, config);\n  }\n\n  enableLayoutAnimations(flag: boolean): void {\n    this.InnerNativeModule.enableLayoutAnimations(flag);\n  }\n\n  configureProps(uiProps: string[], nativeProps: string[]): void {\n    this.InnerNativeModule.configureProps(uiProps, nativeProps);\n  }\n\n  subscribeForKeyboardEvents(handler: ShareableRef<number>): number {\n    return this.InnerNativeModule.subscribeForKeyboardEvents(handler);\n  }\n\n  unsubscribeFromKeyboardEvents(listenerId: number): void {\n    this.InnerNativeModule.unsubscribeFromKeyboardEvents(listenerId);\n  }\n}\n"],"mappings":"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"}